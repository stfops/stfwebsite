"use strict";tinymce.create("tinymce.plugins.MediaCredit",{$:jQuery,init:function(t,e){var i=this;t.on("BeforeSetContent",function(t,e){t.content=i._do_shcode(t.content)}),t.on("PostProcess",function(t,e){t.get&&(t.content=i._get_shcode(t.content))}),tinymce.dom.Event.bind(document,"mousedown",function(t){var e=tinymce.activeEditor,n=e.selection.getNode();"DT"==n.nodeName&&"mediacredit-dt"===e.dom.getAttrib(n,"class")&&(n=i.$(n).closest("dl.mediacredit").get(0),e.dom.remove(n))})},_do_shcode:function(t){return wp.shortcode.replace("mediacredit",t,function(t){return'<dl class="mediacredit '+t.attrs.named.align+'" data-credit="'+t.attrs.named.credit+'" data-align="'+t.attrs.named.align+'" data-width="'+t.attrs.named.width+'" style="width:'+t.attrs.named.width+'px"><dt class="mediacredit-dt">'+t.content+'<dt><dd class="wp-caption-dd">'+t.attrs.named.credit+"<dd></dl>"})},_get_shcode:function(t){var a=this;return t.replace(/<dl class="mediacredit (.*?)>(.*?)<\/dl>/gi,function(t,e,n){var i=a.$(t),d=i.data();return i.find("img").length?(i.find("."+d.align).removeClass(d.align),wp.shortcode.string({tag:"mediacredit",content:i.find("dt").filter(":not(:empty)").html(),attrs:{id:i.find("img").attr("class").replace(/\D+/g,"attachment_"),width:d.width,align:d.align,credit:d.credit}})):""})},getInfo:function(){return{longname:"UW Media Credit",author:"Dane Odekirk",authorurl:"http://uw.edu",infourl:"http://uw.edu",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("mediacredit",tinymce.plugins.MediaCredit);